"use strict";(self["webpackChunkvolunteer_aid"]=self["webpackChunkvolunteer_aid"]||[]).push([[577],{5577:function(a,t,e){e.r(t),e.d(t,{default:function(){return W}});var d=e(6252),l=e(3577);const i=a=>((0,d.dD)("data-v-32937322"),a=a(),(0,d.Cn)(),a),o={style:{width:"100%",height:"100vh",color:"var(--color-neutral-10)",margin:"0 auto"}},n=i((()=>(0,d._)("div",{style:{padding:"40px 0 0 0",margin:"0 auto","max-width":"1550px",width:"90%"}},[(0,d._)("p",{style:{"font-size":"24px","font-weight":"bold","margin-bottom":"20px"}},"志愿表管理")],-1))),r={style:{width:"100%",height:"calc(100% - 96px)",position:"relative","overflow-y":"auto"}},m={style:{width:"90%",height:"100%",margin:"0 auto","max-width":"1550px"}},s={style:{"margin-bottom":"20px",width:"100%",position:"relative"}},u={style:{"max-height":"calc(100vh - 48px - 65px - 80px)","overflow-y":"auto","padding-top":"20px"}},g={style:{padding:"20px 20px","border-radius":"10px","background-color":"var(--color-neutral-1)","box-shadow":"0 4px 10px rgba(0,0,0,0.1)","max-width":"300px"}},b={style:{padding:"20px 20px","border-radius":"10px","background-color":"var(--color-neutral-1)","box-shadow":"0 4px 10px rgba(0,0,0,0.1)","max-width":"300px"}},p=i((()=>(0,d._)("p",{style:{color:"var(--color-neutral-10)"}},"选择的表格文件的第一张工作表应包含导入数据，并且工作表从A1单元格到Q1单元格的内容应依次为：学校名称、学校代码、专业名称、专业标签、专业代码、前1年分数线、前1年录取人数、前1年最低位次、前2年分数线、前2年录取人数、前2年最低位次、前3年分数线、前3年录取人数、前3年最低位次、限制、批次、省份。",-1))),c={style:{padding:"20px 20px","border-radius":"10px","background-color":"var(--color-neutral-1)","box-shadow":"0 4px 10px rgba(0,0,0,0.1)","max-width":"300px"}},h=i((()=>(0,d._)("p",{style:{color:"var(--color-neutral-10)"}},"此操作不可恢复",-1))),v={key:0,style:{float:"right"}},F={style:{padding:"20px 20px","border-radius":"10px","background-color":"var(--color-neutral-1)","box-shadow":"0 4px 10px rgba(0,0,0,0.1)"}},x=i((()=>(0,d._)("br",null,null,-1))),k={key:0,style:{color:"red"}};function f(a,t,e,i,f,w){const C=(0,d.up)("v-btn"),V=(0,d.up)("v-text-field"),y=(0,d.up)("a-modal"),U=(0,d.up)("v-divider"),W=(0,d.up)("a-input"),A=(0,d.up)("a-trigger"),_=(0,d.up)("a-upload"),I=(0,d.up)("a-button"),N=(0,d.up)("a-table");return(0,d.wg)(),(0,d.iD)("div",o,[n,(0,d._)("div",r,[(0,d._)("div",m,[(0,d._)("div",s,[(0,d.Wm)(y,{"ok-loading":f.data.detailForm.isAdding,closable:!1,"mask-closable":!f.data.detailForm.isAdding,visible:f.data.detailForm.show,"onUpdate:visible":t[18]||(t[18]=a=>f.data.detailForm.show=a),onCancel:()=>{},onOk:w.detailFormClickOk},{title:(0,d.w5)((()=>[(0,d.Uk)((0,l.zw)(f.data.detailForm.title),1)])),default:(0,d.w5)((()=>[(0,d._)("div",u,["编辑志愿"==f.data.detailForm.title?((0,d.wg)(),(0,d.j4)(C,{key:0,onClick:w.deleteSingle,disabled:f.data.detailForm.isAdding,variant:"text",style:{color:"white","background-color":"red","margin-bottom":"20px"}},{default:(0,d.w5)((()=>[(0,d.Uk)("删除")])),_:1},8,["onClick","disabled"])):(0,d.kq)("",!0),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.universityName,"onUpdate:modelValue":t[0]||(t[0]=a=>f.data.detailForm.item.universityName=a),variant:"outlined",label:"学校名称"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.universityCode,"onUpdate:modelValue":t[1]||(t[1]=a=>f.data.detailForm.item.universityCode=a),variant:"outlined",label:"学校代码"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.majorName,"onUpdate:modelValue":t[2]||(t[2]=a=>f.data.detailForm.item.majorName=a),variant:"outlined",label:"专业名称"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.majorRemarks,"onUpdate:modelValue":t[3]||(t[3]=a=>f.data.detailForm.item.majorRemarks=a),variant:"outlined",label:"专业标记"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.majorCode,"onUpdate:modelValue":t[4]||(t[4]=a=>f.data.detailForm.item.majorCode=a),variant:"outlined",label:"专业代码"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.batch,"onUpdate:modelValue":t[5]||(t[5]=a=>f.data.detailForm.item.batch=a),variant:"outlined",label:"批次"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.claim,"onUpdate:modelValue":t[6]||(t[6]=a=>f.data.detailForm.item.claim=a),variant:"outlined",label:"限制"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.province,"onUpdate:modelValue":t[7]||(t[7]=a=>f.data.detailForm.item.province=a),variant:"outlined",label:"省份"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.score1,"onUpdate:modelValue":t[8]||(t[8]=a=>f.data.detailForm.item.score1=a),variant:"outlined",label:"前1年分数线"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.num1,"onUpdate:modelValue":t[9]||(t[9]=a=>f.data.detailForm.item.num1=a),variant:"outlined",label:"前1年录取人数"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.ranks1,"onUpdate:modelValue":t[10]||(t[10]=a=>f.data.detailForm.item.ranks1=a),variant:"outlined",label:"前1年最低位次"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.score2,"onUpdate:modelValue":t[11]||(t[11]=a=>f.data.detailForm.item.score2=a),variant:"outlined",label:"前2年分数线"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.num2,"onUpdate:modelValue":t[12]||(t[12]=a=>f.data.detailForm.item.num2=a),variant:"outlined",label:"前2年录取人数"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.ranks2,"onUpdate:modelValue":t[13]||(t[13]=a=>f.data.detailForm.item.ranks2=a),variant:"outlined",label:"前2年最低位次"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.score3,"onUpdate:modelValue":t[14]||(t[14]=a=>f.data.detailForm.item.score3=a),variant:"outlined",label:"前3年分数线"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.num3,"onUpdate:modelValue":t[15]||(t[15]=a=>f.data.detailForm.item.num3=a),variant:"outlined",label:"前3年录取人数"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.ranks3,"onUpdate:modelValue":t[16]||(t[16]=a=>f.data.detailForm.item.ranks3=a),variant:"outlined",label:"前3年最低位次"},null,8,["disabled","modelValue"]),(0,d.Wm)(V,{disabled:f.data.detailForm.isAdding,modelValue:f.data.detailForm.item.money,"onUpdate:modelValue":t[17]||(t[17]=a=>f.data.detailForm.item.money=a),variant:"outlined",label:"学费"},null,8,["disabled","modelValue"])])])),_:1},8,["ok-loading","mask-closable","visible","onOk"]),(0,d.Wm)(A,{trigger:"click","unmount-on-close":!1},{content:(0,d.w5)((()=>[(0,d._)("div",g,[(0,d.Wm)(C,{disabled:f.data.loading,variant:"text",style:{"margin-bottom":"5px",color:"var(--color-neutral-10)"},onClick:w.showAllClick},{default:(0,d.w5)((()=>[(0,d.Uk)("显示全部")])),_:1},8,["disabled","onClick"]),(0,d.Wm)(U),(0,d.Wm)(W,{disabled:f.data.loading,modelValue:f.data.searchForm.universityName,"onUpdate:modelValue":t[19]||(t[19]=a=>f.data.searchForm.universityName=a),placeholder:"院校名称",style:{width:"200px","margin-bottom":"5px","margin-top":"10px"}},null,8,["disabled","modelValue"]),(0,d.Wm)(W,{disabled:f.data.loading,modelValue:f.data.searchForm.majorName,"onUpdate:modelValue":t[20]||(t[20]=a=>f.data.searchForm.majorName=a),placeholder:"专业名称",style:{width:"200px","margin-bottom":"5px"}},null,8,["disabled","modelValue"]),(0,d.Wm)(W,{disabled:f.data.loading,modelValue:f.data.searchForm.province,"onUpdate:modelValue":t[21]||(t[21]=a=>f.data.searchForm.province=a),placeholder:"省份",style:{width:"200px","margin-bottom":"5px"}},null,8,["disabled","modelValue"]),(0,d.Wm)(C,{style:{color:"var(--color-neutral-10)"},disabled:f.data.loading,variant:"text",onClick:t[22]||(t[22]=a=>{f.data.tableConfig.page=1,w.getTable()})},{default:(0,d.w5)((()=>[(0,d.Uk)("搜索/刷新")])),_:1},8,["disabled"])])])),default:(0,d.w5)((()=>[(0,d.Wm)(C,{loading:f.data.loading,style:{"margin-right":"10px"},variant:"text"},{default:(0,d.w5)((()=>[(0,d.Uk)("搜索")])),_:1},8,["loading"])])),_:1}),(0,d.Wm)(A,{trigger:"click","unmount-on-close":!1},{content:(0,d.w5)((()=>[(0,d._)("div",b,[p,(0,d.Wm)(_,{onSuccess:w.uploaded,style:{"margin-top":"10px"},disabled:f.data.loading,action:e.appData.serverURL+"/bg/volunteer/import"},null,8,["onSuccess","disabled","action"])])])),default:(0,d.w5)((()=>[(0,d.Wm)(C,{disabled:f.data.loading,style:{"margin-right":"10px"},variant:"text"},{default:(0,d.w5)((()=>[(0,d.Uk)("导入")])),_:1},8,["disabled"])])),_:1}),(0,d.Wm)(A,{trigger:"click","unmount-on-close":!1},{content:(0,d.w5)((()=>[(0,d._)("div",c,[h,(0,d.Wm)(C,{disabled:f.data.loading,variant:"text",style:{"background-color":"red",color:"white"},onClick:w.deleteAll},{default:(0,d.w5)((()=>[(0,d.Uk)("清空")])),_:1},8,["disabled","onClick"])])])),default:(0,d.w5)((()=>[(0,d.Wm)(C,{disabled:f.data.loading,style:{"margin-right":"10px"},variant:"text"},{default:(0,d.w5)((()=>[(0,d.Uk)("清空")])),_:1},8,["disabled"])])),_:1}),(0,d.Wm)(C,{disabled:f.data.loading,style:{"margin-right":"10px"},variant:"text",onClick:w.addVolunteerButtonClick},{default:(0,d.w5)((()=>[(0,d.Uk)("添加")])),_:1},8,["disabled","onClick"]),0!=w.getPageTotal(f.data.tableConfig.total,f.data.tableConfig.size)?((0,d.wg)(),(0,d.iD)("div",v,[(0,d.Wm)(C,{disabled:f.data.loading||1==f.data.tableConfig.page,style:{"margin-right":"0px"},variant:"text",onClick:t[23]||(t[23]=()=>{f.data.tableConfig.page=1,w.getTable()})},{default:(0,d.w5)((()=>[(0,d.Uk)("第一页")])),_:1},8,["disabled"]),(0,d.Wm)(C,{disabled:f.data.loading||1==f.data.tableConfig.page,style:{"margin-right":"10px"},variant:"text",onClick:t[24]||(t[24]=()=>{f.data.tableConfig.page-=1,w.getTable()})},{default:(0,d.w5)((()=>[(0,d.Uk)("上一页")])),_:1},8,["disabled"]),(0,d.Wm)(A,{trigger:"click","unmount-on-close":!1},{content:(0,d.w5)((()=>[(0,d._)("div",F,[(0,d.Wm)(W,{modelValue:f.data.tableConfig.pageNumInput,"onUpdate:modelValue":t[25]||(t[25]=a=>f.data.tableConfig.pageNumInput=a),placeholder:"页码",style:{width:"70px"}},null,8,["modelValue"]),(0,d.Wm)(I,{loading:f.data.loading,onClick:w.tableChangePage,disabled:""==f.data.tableConfig.pageNumInput,style:{"margin-left":"5px"}},{default:(0,d.w5)((()=>[(0,d.Uk)("转到")])),_:1},8,["loading","onClick","disabled"]),x,""!=f.data.tableConfig.warningText?((0,d.wg)(),(0,d.iD)("p",k,(0,l.zw)(f.data.tableConfig.warningText),1)):(0,d.kq)("",!0)])])),default:(0,d.w5)((()=>[(0,d.Wm)(C,{disabled:f.data.loading,style:{"margin-right":"0px"},variant:"text"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,l.zw)(f.data.tableConfig.page.toString()+"/"+w.getPageTotal(f.data.tableConfig.total,f.data.tableConfig.size).toString()),1)])),_:1},8,["disabled"])])),_:1}),(0,d.Wm)(C,{disabled:f.data.loading||f.data.tableConfig.page==w.getPageTotal(f.data.tableConfig.total,f.data.tableConfig.size),style:{"margin-right":"0px"},variant:"text",onClick:t[26]||(t[26]=()=>{f.data.tableConfig.page+=1,w.getTable()})},{default:(0,d.w5)((()=>[(0,d.Uk)("下一页")])),_:1},8,["disabled"]),(0,d.Wm)(C,{disabled:f.data.loading||f.data.tableConfig.page==w.getPageTotal(f.data.tableConfig.total,f.data.tableConfig.size),style:{"margin-right":"0px"},variant:"text",onClick:t[27]||(t[27]=()=>{f.data.tableConfig.page=w.getPageTotal(f.data.tableConfig.total,f.data.tableConfig.size),w.getTable()})},{default:(0,d.w5)((()=>[(0,d.Uk)("最后一页")])),_:1},8,["disabled"])])):(0,d.kq)("",!0)]),(0,d.Wm)(N,{onRowClick:w.tableItemClick,pagination:!1,style:{width:"100%","margin-bottom":"40px"},columns:[{dataIndex:"mark",title:"标记"},{dataIndex:"universityName",title:"学校名称"},{dataIndex:"universityCode",title:"学校代码"},{dataIndex:"majorName",title:"专业名称"},{dataIndex:"majorRemarks",title:"专业标记"},{dataIndex:"majorCode",title:"专业代码"},{dataIndex:"batch",title:"批次"},{dataIndex:"claim",title:"限制"},{dataIndex:"universityProvince",title:"学校省份"},{dataIndex:"province",title:"省份"}],data:f.data.table,loading:f.data.loading},null,8,["onRowClick","data","loading"])])])])}var w=e(2487),C=e.n(w),V={name:"",data(){return{data:{table:[],loading:!1,tableConfig:{total:0,page:1,size:10,warningText:"",pageNumInput:""},searchForm:{universityName:"",majorName:"",province:""},detailForm:{show:!1,title:"添加志愿",isAdding:!1,item:{mark:"",universityName:"",universityCode:"",majorName:"",majorRemarks:"",majorCode:"",score1:"",num1:"",ranks1:"",score2:"",num2:"",ranks2:"",score3:"",num3:"",ranks3:"",claim:"",batch:"",province:""}}}}},methods:{async deleteSingle(){this.data.detailForm.isAdding=!0,await C().axiosPost(this.appData.serverURL,"/bg/volunteer/deleteSingle",{token:this.bgData.loginedAdminInfo.token,mark:this.data.detailForm.item.mark}),this.data.detailForm.show=!1,this.data.detailForm.isAdding=!1,this.getTable()},getPageTotal(a,t){let e=parseInt(a/t);return a%t!=0&&(e+=1),e},async detailFormClickOk(){this.data.detailForm.isAdding=!0;let a=["num1","score1","ranks1","num2","score2","ranks2","num3","score3","ranks3"];for(let d=0;d<a.length;d++){if("0"!=this.data.detailForm.item[a[d]]&&(NaN==parseInt(this.data.detailForm.item[a[d]])||""==this.data.detailForm.item[a[d]]))return this.data.detailForm.isAdding=!1,this.$message.error({content:this.data.detailForm.title.slice(0,2)+"失败。分数线、最低位次和录取人数应为数字，若没有数据，请输入0"}),void(this.data.detailForm.show=!0);this.data.detailForm.item[a[d]]=parseInt(this.data.detailForm.item[a[d]])}if("不限"!=this.data.detailForm.item.money)try{let a=JSON.parse(this.data.detailForm.item.money);if(a<0)throw new Error}catch(e){return this.$message.error({content:this.data.detailForm.title.slice(0,2)+"失败。学费应为不限或非负数。"}),this.data.detailForm.show=!0,void(this.data.detailForm.isAdding=!1)}let t=await C().axiosPost(this.appData.serverURL,"/bg/volunteer/addOrEdit",{token:this.bgData.loginedAdminInfo.token,data:this.data.detailForm.item});-2!=t.status?(this.getTable(),this.data.detailForm.isAdding=!1):C().axiosPostUnauthorized()},addVolunteerButtonClick(){for(let a=0;a<Object.keys(this.data.detailForm.item).length;a++)this.data.detailForm.item[Object.keys(this.data.detailForm.item)[a]]="";this.data.detailForm.title="添加志愿",this.data.detailForm.show=!0},tableItemClick(a){this.data.detailForm.item=JSON.parse(JSON.stringify(a)),this.data.detailForm.title="编辑志愿",this.data.detailForm.show=!0},async deleteAll(){this.data.tableConfig.page=1,this.data.loading=!0,await C().axiosPost(this.appData.serverURL,"/bg/volunteer/deleteAll",{token:this.bgData.loginedAdminInfo.token}),this.data.loading=!1,this.showAllClick()},showAllClick(){this.data.searchForm.universityName="",this.data.searchForm.majorName="",this.data.searchForm.province="",this.getTable()},uploaded(a){console.log(a),this.getTable()},tableChangePage(){this.data.tableConfig.warningText="",parseInt(this.data.tableConfig.pageNumInput)<1||parseInt(this.data.tableConfig.pageNumInput)>parseInt(this.data.tableConfig.total/this.data.tableConfig.size+.5)?this.data.tableConfig.warningText="页码应为正数且不大于页面总数":(this.data.tableConfig.page=parseInt(this.data.tableConfig.pageNumInput),this.getTable())},async getTable(){this.data.table=[],this.data.loading=!0;let a=await C().axiosPost(this.appData.serverURL,"/bg/volunteer/list",{token:this.bgData.loginedAdminInfo.token,page:this.data.tableConfig.page,size:this.data.tableConfig.size,searchForm:this.data.searchForm});-2!=a.status?(this.data.table=a.results.items,this.data.tableConfig.total=a.results.total,this.data.loading=!1):C().axiosPostUnauthorized()}},mounted(){this.getTable()},props:{appData:void 0,bgData:void 0},computed:{},watch:{},created(){},beforeMount(){},beforeUpdate(){},beforeDestroy(){},updated(){},destroyed(){},activated(){}},y=e(3744);const U=(0,y.Z)(V,[["render",f],["__scopeId","data-v-32937322"]]);var W=U}}]);
//# sourceMappingURL=577.94ba27c5.js.map