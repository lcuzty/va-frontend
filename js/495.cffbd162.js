"use strict";(self["webpackChunkvolunteer_aid"]=self["webpackChunkvolunteer_aid"]||[]).push([[495],{2677:function(a,t,e){e.r(t),e.d(t,{default:function(){return _}});var i=e(6252),o=e(3577);const l={style:{width:"100%",height:"100vh",color:"var(--color-neutral-10)",margin:"0 auto"}},d=(0,i._)("div",{style:{padding:"40px 0 0 0",margin:"0 auto","max-width":"1550px",width:"90%"}},[(0,i._)("p",{style:{"font-size":"24px","font-weight":"bold","margin-bottom":"20px"}},"专业信息管理")],-1),n={style:{width:"100%",height:"calc(100% - 96px)",position:"relative","overflow-y":"auto"}},r={style:{width:"90%",height:"100%",margin:"0 auto","max-width":"1550px"}},s={style:{"margin-bottom":"20px",width:"100%",position:"relative"}},g={style:{padding:"20px 20px","border-radius":"10px","background-color":"var(--color-neutral-1)","box-shadow":"0 4px 10px rgba(0,0,0,0.1)","max-width":"300px"}},p=(0,i._)("p",{style:{color:"var(--color-neutral-10)"}},"选择的表格文件的第一张工作表应包含导入数据，并且工作表从A1单元格到R1单元格的内容应依次为：专业名称、等级、类名、大类名、详解、就业、是什么、学什么、做什么、男女比例、修业年限、学士学位名称、选考学科建议、考研 方向、文理比例、社会名人、开设课程、就业率。",-1),m={key:0,style:{display:"inline-block",float:"right"}},c={style:{padding:"20px 20px","border-radius":"10px","background-color":"var(--color-neutral-1)","box-shadow":"0 4px 10px rgba(0,0,0,0.1)"}},f=(0,i._)("br",null,null,-1),h={key:0,style:{color:"red"}},u={style:{"max-height":"calc(80vh - 48px - 65px)","overflow-y":"scroll"}};function b(a,t,e,b,x,k){const w=(0,i.up)("a-input"),v=(0,i.up)("v-btn"),S=(0,i.up)("a-upload"),y=(0,i.up)("a-trigger"),I=(0,i.up)("a-button"),T=(0,i.up)("a-table"),C=(0,i.up)("data-editor"),_=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",l,[d,(0,i._)("div",n,[(0,i._)("div",r,[(0,i._)("div",s,[(0,i.Wm)(w,{disabled:x.data.loading,modelValue:x.data.form.majorName,"onUpdate:modelValue":t[0]||(t[0]=a=>x.data.form.majorName=a),style:{border:"0px","line-height":"36px",display:"inline-block",width:"200px","margin-right":"10px","background-color":"transparent","border-bottom":"1px solid var(--color-neutral-10)"},placeholder:"专业名称"},null,8,["disabled","modelValue"]),(0,i.Wm)(v,{loading:x.data.loading,style:{"margin-right":"10px"},variant:"text",onClick:k.getTable},{default:(0,i.w5)((()=>[(0,i.Uk)("搜索/刷新")])),_:1},8,["loading","onClick"]),(0,i.Wm)(y,{trigger:"click","unmount-on-close":!1},{content:(0,i.w5)((()=>[(0,i._)("div",g,[p,(0,i.Wm)(S,{onSuccess:k.imported,action:e.appData.serverURL+"/bg/special/import"},null,8,["onSuccess","action"])])])),default:(0,i.w5)((()=>[(0,i.Wm)(v,{disabled:x.data.loading,style:{"margin-right":"10px"},variant:"text"},{default:(0,i.w5)((()=>[(0,i.Uk)("导入")])),_:1},8,["disabled"])])),_:1}),(0,i.Wm)(v,{disabled:x.data.loading||0==x.data.form.total,style:{"margin-right":"0px"},variant:"text",onClick:k.deleteAll},{default:(0,i.w5)((()=>[(0,i.Uk)("清空")])),_:1},8,["disabled","onClick"]),x.data.form.total>x.data.form.size?((0,i.wg)(),(0,i.iD)("div",m,[(0,i.Wm)(v,{variant:"text",onClick:t[1]||(t[1]=a=>{x.data.form.page=1,k.getTable()}),disabled:x.data.loading||1==x.data.form.page,style:{"margin-left":"5px"}},{default:(0,i.w5)((()=>[(0,i.Uk)("第一页")])),_:1},8,["disabled"]),(0,i.Wm)(v,{variant:"text",onClick:t[2]||(t[2]=a=>{x.data.form.page-=1,k.getTable()}),disabled:x.data.loading||1==x.data.form.page,style:{"margin-left":"5px"}},{default:(0,i.w5)((()=>[(0,i.Uk)("上一页")])),_:1},8,["disabled"]),(0,i.Wm)(y,{trigger:"click","unmount-on-close":!1},{content:(0,i.w5)((()=>[(0,i._)("div",c,[(0,i.Wm)(w,{modelValue:x.data.form.pageInput,"onUpdate:modelValue":t[3]||(t[3]=a=>x.data.form.pageInput=a),placeholder:"页码",style:{width:"70px"}},null,8,["modelValue"]),(0,i.Wm)(I,{loading:x.data.loading,onClick:k.tableChangePage,disabled:""==x.data.form.pageInput,style:{"margin-left":"5px"}},{default:(0,i.w5)((()=>[(0,i.Uk)("转到")])),_:1},8,["loading","onClick","disabled"]),f,""!=x.data.form.warningText?((0,i.wg)(),(0,i.iD)("p",h,(0,o.zw)(x.data.form.warningText),1)):(0,i.kq)("",!0)])])),default:(0,i.w5)((()=>[(0,i.Wm)(v,{variant:"text",disabled:x.data.loading,style:{"margin-left":"5px"}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(x.data.form.page.toString()+"/"+x.data.form.pageTotal.toString()),1)])),_:1},8,["disabled"])])),_:1}),(0,i.Wm)(v,{variant:"text",onClick:t[4]||(t[4]=a=>{x.data.form.page+=1,k.getTable()}),disabled:x.data.loading||x.data.form.page==x.data.form.pageTotal,style:{"margin-left":"5px"}},{default:(0,i.w5)((()=>[(0,i.Uk)("下一页")])),_:1},8,["disabled"]),(0,i.Wm)(v,{variant:"text",onClick:t[5]||(t[5]=a=>{x.data.form.page=x.data.form.pageTotal,k.getTable()}),disabled:x.data.loading||x.data.form.page==x.data.form.pageTotal,style:{"margin-left":"5px"}},{default:(0,i.w5)((()=>[(0,i.Uk)("最后一页")])),_:1},8,["disabled"])])):(0,i.kq)("",!0)]),(0,i.Wm)(T,{onRowClick:k.tableRowClick,pagination:!1,loading:x.data.loading,style:{width:"100%","margin-bottom":"40px"},columns:[{dataIndex:"mark",title:"标记"},{dataIndex:"majorName",title:"专业名称"},{dataIndex:"level",title:"等级"},{dataIndex:"className",title:"类名"},{dataIndex:"bigClassName",title:"大类名"}],data:x.data.table},null,8,["onRowClick","loading","data"])])])]),(0,i.Wm)(_,{visible:x.data.showEditSpecialInfoForm,"onUpdate:visible":t[6]||(t[6]=a=>x.data.showEditSpecialInfoForm=a),onOk:k.changeSpecialInfo,closable:0==x.data.isSaving,"mask-closable":0==x.data.isSaving,"ok-loading":x.data.isSaving},{title:(0,i.w5)((()=>[(0,i.Uk)(" 编辑专业信息 ")])),default:(0,i.w5)((()=>[(0,i._)("div",u,[x.data.showEditSpecialInfoForm?((0,i.wg)(),(0,i.j4)(C,{key:0,"read-only":1==x.data.isSaving,onDataChanged:k.SpecialInfoChanged,style:{color:"var(--color-neutral-10)",width:"100%","background-color":"white","border-radius":"5px",padding:"15px 15px 5px 15px"},data:x.data.editSpecialInfoSelectedItem},null,8,["read-only","onDataChanged","data"])):(0,i.kq)("",!0)])])),_:1},8,["visible","onOk","closable","mask-closable","ok-loading"])],64)}var x=e(2487),k=e.n(x),w=e(9182),v=e.n(w),S=e(6207),y=e(5121),I={components:{dataEditor:S.Z},name:"",data(){return{data:{loading:!1,form:{page:1,size:25,total:0,pageTotal:0,pageInput:"",warningText:"",majorName:""},table:[],showEditSpecialInfoForm:!1,editSpecialInfoSelectedItem:void 0,editSpecialInfoSelectedItemMark:void 0,isSaving:!1}}},methods:{async changeSpecialInfo(){this.data.isSaving=!0,this.data.editSpecialInfoSelectedItem["mark"]=this.data.editSpecialInfoSelectedItemMark.toString();const a=k().encodeString(JSON.stringify({token:this.bgData.loginedAdminInfo.token,data:this.data.editSpecialInfoSelectedItem})),t=new Blob([a],{type:"text/plain"}),e=new FormData;e.append("file",t,"filename.txt"),await y.Z.post(v().serverURL+"/bg/Special/change",e,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{console.log(a)})),this.data.isSaving=!1,this.getTable()},SpecialInfoChanged(a){this.data.editSpecialInfoSelectedItem=JSON.parse(JSON.stringify(a)).data},tableRowClick(a){for(let e=0;e<Object.keys(a).length;e++)try{a[Object.keys(a)[e]]=JSON.parse(a[Object.keys(a)[e]])}catch(t){}a=JSON.parse(JSON.stringify(a)),this.data.editSpecialInfoSelectedItemMark=a.mark,delete a["mark"],this.data.editSpecialInfoSelectedItem=a,this.data.showEditSpecialInfoForm=!0},async deleteAll(){this.data.loading=!0,await k().axiosPostWithCheckStatus(v().serverURL,"/bg/Special/delete",{token:this.bgData.loginedAdminInfo.token}),this.data.loading=!1,this.data.form.page=1,this.getTable()},tableChangePage(){this.data.form.warningText="";let a=parseInt(this.data.form.pageInput);isNaN(a)?this.data.form.warningText="页码应为数字":a<1||a>this.data.form.pageTotal?this.data.form.warningText="页码应在1到"+this.data.form.pageTotal.toString()+"之间":(this.data.form.page=a,this.getTable())},imported(){this.getTable()},async getTable(){this.data.loading=!0;let a=await k().axiosPostWithCheckStatus(v().serverURL,"/bg/special/list",{token:this.bgData.loginedAdminInfo.token,page:this.data.form.page,size:this.data.form.size,majorName:this.data.form.majorName});this.data.form.total=a.results.total,this.data.form.pageTotal=k().getPageTotal(a.results.total,this.data.form.size),this.data.table=a.results.data,this.data.loading=!1}},mounted(){this.getTable()},props:{appData:void 0,bgData:void 0},computed:{},watch:{},created(){},beforeMount(){},beforeUpdate(){},beforeDestroy(){},updated(){},destroyed(){},activated(){}},T=e(3744);const C=(0,T.Z)(I,[["render",b]]);var _=C}}]);
//# sourceMappingURL=495.cffbd162.js.map