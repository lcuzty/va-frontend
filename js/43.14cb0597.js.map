{"version":3,"file":"js/43.14cb0597.js","mappings":"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","sources":["webpack://volunteer_aid/./src/views/bgViews/setting.vue","webpack://volunteer_aid/./src/views/bgViews/setting.vue?e5fb"],"sourcesContent":["<template>\r\n    <div style=\"width: 100%;height: 100vh;color:var(--color-neutral-10);margin: 0 auto\">\r\n      <div style=\"padding: 40px 0 0 0;margin: 0 auto;max-width: 1550px;width: 90%;\">\r\n        <p style=\"font-size: 24px;font-weight: bold;margin-bottom: 10px\">系统设置</p>\r\n      </div>\r\n      <div style=\"width: 100%;height: calc(100% - 96px);position: relative;overflow-y: auto;padding-bottom: 60px;\">\r\n        <div style=\"width: 90%;height: 100%;margin: 0 auto;max-width: 1550px;padding-top: 20px;\">\r\n            <p style=\"margin-bottom: 10px;\">系统设置列表</p>\r\n            <div v-for=\"item in data.settings\" class=\"item\" @click=\"getSetting(item.keyName)\">\r\n                {{ item.keyName }}\r\n            </div>\r\n        </div>\r\n      </div>\r\n      <a-modal v-if=\"data.currentSetting!=undefined\" v-model:visible=\"data.showEditSettingForm\" @ok=\"change\" :closable=\"data.isSaving==false\" :mask-closable=\"data.isSaving==false\" :ok-loading=\"data.isSaving\">\r\n          <template #title>\r\n            编辑{{ data.currentSetting.keyName }}\r\n          </template>\r\n          <div style=\"max-height: calc(80vh - 48px - 65px);overflow-y: scroll;\">\r\n            <p>value</p>\r\n            <input :disabled=\"isSettingBan(data.currentSetting.keyName)==true\" v-model=\"data.currentSetting.value\" style=\"line-height: 45px;border: 0;width: 100%;display: inline-block;background-color: var(--color-neutral-2);border-radius: 5px;padding: 0 5px;\">\r\n            <p>explain</p>\r\n            <input :disabled=\"isSettingBan(data.currentSetting.keyName)==true\" v-model=\"data.currentSetting.explain\" style=\"line-height: 45px;border: 0;width: 100%;display: inline-block;background-color: var(--color-neutral-2);border-radius: 5px;padding: 0 5px;\">\r\n            <p v-if=\"isSettingBan(this.data.currentSetting.keyName)==true\" style=\"color: red;\">此设置的值由系统决定，管理员不可直接修改。</p>\r\n            <v-btn v-if=\"isSettingBan(data.currentSetting.keyName)==false\">删除</v-btn>\r\n          </div>\r\n        </a-modal>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import tool from '@/utlis/tool'\r\n  import config from '@/config'\r\n  import dataEditor from \"@/components/dataEditor.vue\";\r\n  import axios from \"axios\";\r\n  \r\n  export default {\r\n    components:{\r\n      dataEditor\r\n    },\r\n    name: '',\r\n    data() {\r\n      return {\r\n        data:{\r\n          settings:[],\r\n          showEditSettingForm:false,\r\n          isSaving:false,\r\n          currentSetting:undefined,\r\n          banSettings:[]\r\n        }\r\n      }\r\n    },\r\n  \r\n    methods: {\r\n        isSettingBan(name){\r\n            for(let i=0;i<this.data.banSettings.length;i++){\r\n                if(this.data.banSettings[i]==name){\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        },\r\n        async deleteSetting(){\r\n            this.data.isSaving = true\r\n            await tool.axiosPostWithCheckStatus(config.serverURL,'/setting/delete',{\r\n                keyName:this.data.currentSetting.keyName\r\n            })\r\n            this.data.isSaving = false\r\n            this.data.showEditSettingForm = false\r\n            this.getSettings()\r\n        },\r\n        async getSetting(name){\r\n            let re = await tool.axiosPostWithCheckStatus(config.serverURL,'/setting/get',{\r\n                keyName:name\r\n            })\r\n            this.data.showEditSettingForm = true\r\n            this.data.currentSetting = re.results\r\n            console.log(re)\r\n        },\r\n        async change(){\r\n            if(this.isSettingBan(this.data.currentSetting.keyName)==true){\r\n                this.data.showEditSettingForm = false\r\n                return\r\n            }\r\n            this.data.isSaving = true\r\n            await tool.axiosPostWithCheckStatus(config.serverURL,'/setting/change',{\r\n                token:this.bgData.loginedAdminInfo.token,\r\n                keyName:this.data.currentSetting.keyName,\r\n                value:this.data.currentSetting.value,\r\n                explain:this.data.currentSetting.explain,\r\n            })\r\n            this.data.isSaving = false\r\n            this.data.showEditSettingForm = false\r\n            this.getSettings()\r\n        },\r\n        async getSettings(){\r\n            let re = await tool.axiosPostWithCheckStatus(config.serverURL,'/bg/setting/list',{\r\n                token:this.bgData.loginedAdminInfo.token\r\n            })\r\n            this.data.settings = re.results.list\r\n            this.data.banSettings = re.results.banList\r\n            console.log(re)\r\n        }\r\n    },\r\n  \r\n    //生命周期 - 挂载完成（可以访问DOM元素）\",html模板已渲染\r\n    mounted() {\r\n        this.getSettings()\r\n    },\r\n  \r\n    props: {\r\n      appData:undefined,\r\n      bgData:undefined\r\n    },\r\n  \r\n    //监听属性 类似于data概念\",\r\n    computed: {},\r\n  \r\n    //监控data中的数据变化\",\r\n    watch: {},\r\n  \r\n    //生命周期 - 创建完成（可以访问当前this实例）\",数据模型已加载，方法已加载,html模板已加载,html模板未渲染\r\n    created() {\r\n    },\r\n  \r\n    //生命周期 - 挂载之前\",html模板未渲染\r\n    beforeMount() {\r\n    },\r\n  \r\n    //生命周期 - 更新之前\",数据模型已更新,html模板未更新\r\n    beforeUpdate() {\r\n    },\r\n  \r\n    // 生命周期 - 销毁之前调用\r\n    beforeDestroy() {\r\n    },\r\n  \r\n    //生命周期 - 更新之后\",数据模型已更新,html模板已更新\r\n    updated() {\r\n    },\r\n  \r\n    //生命周期 - 销毁完成\"\r\n    destroyed() {\r\n    },\r\n  \r\n    //如果页面有keep-alive缓存功能，这个函数会触发\",\r\n    activated() {\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n\r\n  .item{\r\n      padding: 20px 20px;\r\n      width: 100%;\r\n      max-width: 600px;\r\n  }\r\n\r\n  .item:hover{\r\n      background-color: var(--color-neutral-3);\r\n  }\r\n\r\n  .item:active{\r\n      background-color: var(--color-neutral-2);\r\n  }\r\n  \r\n  </style>","import { render } from \"./setting.vue?vue&type=template&id=2ab05890&scoped=true\"\nimport script from \"./setting.vue?vue&type=script&lang=js\"\nexport * from \"./setting.vue?vue&type=script&lang=js\"\n\nimport \"./setting.vue?vue&type=style&index=0&id=2ab05890&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2ab05890\"]])\n\nexport default __exports__"],"names":["style","data","settings","item","class","getSetting","keyName","undefined","currentSetting","visible","showEditSettingForm","change","closable","isSaving","title","disabled","isSettingBan","value","explain","this","components","dataEditor","name","banSettings","methods","i","length","deleteSetting","getSettings","re","results","console","log","token","bgData","loginedAdminInfo","list","banList","mounted","props","appData","computed","watch","created","beforeMount","beforeUpdate","beforeDestroy","updated","destroyed","activated","__exports__","render"],"sourceRoot":""}