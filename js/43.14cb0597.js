"use strict";(self["webpackChunkvolunteer_aid"]=self["webpackChunkvolunteer_aid"]||[]).push([[43],{4665:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var i=a(6252),n=a(3577),s=a(9963);const d=t=>((0,i.dD)("data-v-2ab05890"),t=t(),(0,i.Cn)(),t),o={style:{width:"100%",height:"100vh",color:"var(--color-neutral-10)",margin:"0 auto"}},r=d((()=>(0,i._)("div",{style:{padding:"40px 0 0 0",margin:"0 auto","max-width":"1550px",width:"90%"}},[(0,i._)("p",{style:{"font-size":"24px","font-weight":"bold","margin-bottom":"10px"}},"系统设置")],-1))),l={style:{width:"100%",height:"calc(100% - 96px)",position:"relative","overflow-y":"auto","padding-bottom":"60px"}},g={style:{width:"90%",height:"100%",margin:"0 auto","max-width":"1550px","padding-top":"20px"}},h=d((()=>(0,i._)("p",{style:{"margin-bottom":"10px"}},"系统设置列表",-1))),u=["onClick"],c={style:{"max-height":"calc(80vh - 48px - 65px)","overflow-y":"scroll"}},p=d((()=>(0,i._)("p",null,"value",-1))),S=["disabled"],v=d((()=>(0,i._)("p",null,"explain",-1))),k=["disabled"],m={key:0,style:{color:"red"}};function b(t,e,a,d,b,w){const y=(0,i.up)("v-btn"),x=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.iD)("div",o,[r,(0,i._)("div",l,[(0,i._)("div",g,[h,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(b.data.settings,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"item",onClick:e=>w.getSetting(t.keyName)},(0,n.zw)(t.keyName),9,u)))),256))])]),void 0!=b.data.currentSetting?((0,i.wg)(),(0,i.j4)(x,{key:0,visible:b.data.showEditSettingForm,"onUpdate:visible":e[2]||(e[2]=t=>b.data.showEditSettingForm=t),onOk:w.change,closable:0==b.data.isSaving,"mask-closable":0==b.data.isSaving,"ok-loading":b.data.isSaving},{title:(0,i.w5)((()=>[(0,i.Uk)(" 编辑"+(0,n.zw)(b.data.currentSetting.keyName),1)])),default:(0,i.w5)((()=>[(0,i._)("div",c,[p,(0,i.wy)((0,i._)("input",{disabled:1==w.isSettingBan(b.data.currentSetting.keyName),"onUpdate:modelValue":e[0]||(e[0]=t=>b.data.currentSetting.value=t),style:{"line-height":"45px",border:"0",width:"100%",display:"inline-block","background-color":"var(--color-neutral-2)","border-radius":"5px",padding:"0 5px"}},null,8,S),[[s.nr,b.data.currentSetting.value]]),v,(0,i.wy)((0,i._)("input",{disabled:1==w.isSettingBan(b.data.currentSetting.keyName),"onUpdate:modelValue":e[1]||(e[1]=t=>b.data.currentSetting.explain=t),style:{"line-height":"45px",border:"0",width:"100%",display:"inline-block","background-color":"var(--color-neutral-2)","border-radius":"5px",padding:"0 5px"}},null,8,k),[[s.nr,b.data.currentSetting.explain]]),1==w.isSettingBan(this.data.currentSetting.keyName)?((0,i.wg)(),(0,i.iD)("p",m,"此设置的值由系统决定，管理员不可直接修改。")):(0,i.kq)("",!0),0==w.isSettingBan(b.data.currentSetting.keyName)?((0,i.wg)(),(0,i.j4)(y,{key:1},{default:(0,i.w5)((()=>[(0,i.Uk)("删除")])),_:1})):(0,i.kq)("",!0)])])),_:1},8,["visible","onOk","closable","mask-closable","ok-loading"])):(0,i.kq)("",!0)])}var w=a(2487),y=a.n(w),x=a(9182),f=a.n(x),_=a(6207),N={components:{dataEditor:_.Z},name:"",data(){return{data:{settings:[],showEditSettingForm:!1,isSaving:!1,currentSetting:void 0,banSettings:[]}}},methods:{isSettingBan(t){for(let e=0;e<this.data.banSettings.length;e++)if(this.data.banSettings[e]==t)return!0;return!1},async deleteSetting(){this.data.isSaving=!0,await y().axiosPostWithCheckStatus(f().serverURL,"/setting/delete",{keyName:this.data.currentSetting.keyName}),this.data.isSaving=!1,this.data.showEditSettingForm=!1,this.getSettings()},async getSetting(t){let e=await y().axiosPostWithCheckStatus(f().serverURL,"/setting/get",{keyName:t});this.data.showEditSettingForm=!0,this.data.currentSetting=e.results,console.log(e)},async change(){1!=this.isSettingBan(this.data.currentSetting.keyName)?(this.data.isSaving=!0,await y().axiosPostWithCheckStatus(f().serverURL,"/setting/change",{token:this.bgData.loginedAdminInfo.token,keyName:this.data.currentSetting.keyName,value:this.data.currentSetting.value,explain:this.data.currentSetting.explain}),this.data.isSaving=!1,this.data.showEditSettingForm=!1,this.getSettings()):this.data.showEditSettingForm=!1},async getSettings(){let t=await y().axiosPostWithCheckStatus(f().serverURL,"/bg/setting/list",{token:this.bgData.loginedAdminInfo.token});this.data.settings=t.results.list,this.data.banSettings=t.results.banList,console.log(t)}},mounted(){this.getSettings()},props:{appData:void 0,bgData:void 0},computed:{},watch:{},created(){},beforeMount(){},beforeUpdate(){},beforeDestroy(){},updated(){},destroyed(){},activated(){}},D=a(3744);const U=(0,D.Z)(N,[["render",b],["__scopeId","data-v-2ab05890"]]);var C=U}}]);
//# sourceMappingURL=43.14cb0597.js.map