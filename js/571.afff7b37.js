"use strict";(self["webpackChunkvolunteer_aid"]=self["webpackChunkvolunteer_aid"]||[]).push([[571],{4571:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var i=a(6252),d=a(3577);const l=e=>((0,i.dD)("data-v-db8b01ce"),e=e(),(0,i.Cn)(),e),n={style:{width:"100%",height:"100vh",color:"var(--color-neutral-10)",margin:"0 auto"}},o=l((()=>(0,i._)("div",{style:{padding:"40px 0 0 0",margin:"0 auto","max-width":"1550px",width:"90%"}},[(0,i._)("p",{style:{"font-size":"24px","font-weight":"bold","margin-bottom":"20px"}},"一分一段表管理")],-1))),r={style:{width:"100%",height:"calc(100% - 96px)",position:"relative","overflow-y":"auto"}},s={style:{width:"90%",height:"100%",margin:"0 auto","max-width":"1550px"}},c={style:{"margin-bottom":"20px",width:"100%",position:"relative"}},p={style:{padding:"20px 20px","border-radius":"10px","background-color":"var(--color-neutral-1)","box-shadow":"0 4px 10px rgba(0,0,0,0.1)","max-width":"300px"}},g=l((()=>(0,i._)("p",{style:{color:"var(--color-neutral-10)"}},"选择的表格文件的第一张工作表应包含导入数据，并且工作表从A1单元格到J1单元格的内容应依次为：省份、类型、年份、分数、位次、批次、当前分数人数、位次范围、批次分数线、当前总人数。",-1)));function u(e,t,a,l,u,h){const b=(0,i.up)("v-btn"),v=(0,i.up)("a-option"),m=(0,i.up)("a-select"),y=(0,i.up)("a-upload"),x=(0,i.up)("a-trigger"),k=(0,i.up)("a-table");return(0,i.wg)(),(0,i.iD)("div",n,[o,(0,i._)("div",r,[(0,i._)("div",s,[(0,i._)("div",c,[(0,i.Wm)(b,{disabled:u.data.loading,style:(0,d.j5)([{"margin-right":"10px"},{backgroundColor:0==u.data.currentDisplay?"var(--color-neutral-3)":"unset"}]),variant:"text",onClick:t[0]||(t[0]=e=>{u.data.currentDisplay=0,h.getTable()})},{default:(0,i.w5)((()=>[(0,i.Uk)("今年")])),_:1},8,["disabled","style"]),(0,i.Wm)(b,{disabled:u.data.loading,style:(0,d.j5)([{"margin-right":"10px"},{backgroundColor:1==u.data.currentDisplay?"var(--color-neutral-3)":"unset"}]),variant:"text",onClick:t[1]||(t[1]=e=>{u.data.currentDisplay=1,h.getTable()})},{default:(0,i.w5)((()=>[(0,i.Uk)("前1年")])),_:1},8,["disabled","style"]),(0,i.Wm)(b,{disabled:u.data.loading,style:(0,d.j5)([{"margin-right":"10px"},{backgroundColor:2==u.data.currentDisplay?"var(--color-neutral-3)":"unset"}]),variant:"text",onClick:t[2]||(t[2]=e=>{u.data.currentDisplay=2,h.getTable()})},{default:(0,i.w5)((()=>[(0,i.Uk)("前2年")])),_:1},8,["disabled","style"]),(0,i.Wm)(b,{disabled:u.data.loading,style:(0,d.j5)([{"margin-right":"10px"},{backgroundColor:3==u.data.currentDisplay?"var(--color-neutral-3)":"unset"}]),variant:"text",onClick:t[3]||(t[3]=e=>{u.data.currentDisplay=3,h.getTable()})},{default:(0,i.w5)((()=>[(0,i.Uk)("前3年")])),_:1},8,["disabled","style"]),(0,i.Wm)(m,{disabled:u.data.loading,onChange:h.selectProvinceChanged,modelValue:u.data.selectedProvinceName,"onUpdate:modelValue":t[4]||(t[4]=e=>u.data.selectedProvinceName=e),style:{width:"180px",height:"36px","margin-right":"5px",position:"relative",top:"1px"},placeholder:"省份"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(u.data.provinceTypes,(e=>((0,i.wg)(),(0,i.j4)(v,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,d.zw)(e.name),1)])),_:2},1024)))),256))])),_:1},8,["disabled","onChange","modelValue"]),(0,i.Wm)(m,{disabled:u.data.loading,modelValue:u.data.selectedProvinceSelectedTypeName,"onUpdate:modelValue":t[5]||(t[5]=e=>u.data.selectedProvinceSelectedTypeName=e),style:{width:"180px",height:"36px","margin-right":"5px",position:"relative",top:"1px"},placeholder:"类别"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(u.data.selectedProvinceType,(e=>((0,i.wg)(),(0,i.j4)(v,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,d.zw)(e.name),1)])),_:2},1024)))),256))])),_:1},8,["disabled","modelValue"]),(0,i.Wm)(b,{loading:u.data.loading,style:{"margin-right":"10px"},variant:"text",onClick:h.getTable},{default:(0,i.w5)((()=>[(0,i.Uk)("刷新")])),_:1},8,["loading","onClick"]),(0,i.Wm)(x,{trigger:"click","unmount-on-close":!1},{content:(0,i.w5)((()=>[(0,i._)("div",p,[g,(0,i.Wm)(y,{onSuccess:h.imported,action:a.appData.serverURL+"/bg/scoreRank/import"},null,8,["onSuccess","action"])])])),default:(0,i.w5)((()=>[(0,i.Wm)(b,{disabled:u.data.loading,style:{"margin-right":"10px"},variant:"text"},{default:(0,i.w5)((()=>[(0,i.Uk)("导入")])),_:1},8,["disabled"])])),_:1}),(0,i.Wm)(b,{disabled:u.data.loading,style:{"margin-right":"0px"},variant:"text",onClick:h.deleteAllTable},{default:(0,i.w5)((()=>[(0,i.Uk)("清空全部表")])),_:1},8,["disabled","onClick"]),(0,i.Wm)(b,{disabled:u.data.loading,style:{"margin-right":"0px"},variant:"text",onClick:h.deleteCurrentTable},{default:(0,i.w5)((()=>[(0,i.Uk)("清空当前表")])),_:1},8,["disabled","onClick"])]),(0,i.Wm)(k,{loading:u.data.loading,style:{width:"100%","margin-bottom":"40px"},columns:[{dataIndex:"province",title:"省份"},{dataIndex:"type",title:"种类"},{dataIndex:"yearSub",title:"年份差"},{dataIndex:"score",title:"分数"},{dataIndex:"ranks",title:"位次"},{dataIndex:"batch",title:"批次"},{dataIndex:"num",title:"当前分数人数"},{dataIndex:"rankRange",title:"位次区间"},{dataIndex:"controlScore",title:"批次分数线"},{dataIndex:"total",title:"当前总人数"}],data:u.data.table},null,8,["loading","data"])])])])}var h=a(2487),b=a.n(h),v=a(9182),m=a.n(v),y={name:"",data(){return{data:{currentDisplay:1,table:[],loading:!1,showRightMenu:!0,rightTitle:"菜单",provinceTypes:[],selectedProvinceName:"",selectedProvinceType:void 0,selectedProvinceSelectedTypeName:""}}},methods:{imported(){this.getTable()},async deleteAllTable(){this.data.loading=!0,await b().axiosPostWithCheckStatus(m().serverURL,"/bg/scoreRank/delete",{deleteAll:!0,province:this.data.selectedProvinceName,type:this.data.selectedProvinceSelectedTypeName,yearSub:this.data.currentDisplay,token:this.bgData.loginedAdminInfo.token}),this.data.loading=!1,this.getTable()},async deleteCurrentTable(){this.data.loading=!0,await b().axiosPostWithCheckStatus(m().serverURL,"/bg/scoreRank/delete",{deleteAll:!1,province:this.data.selectedProvinceName,type:this.data.selectedProvinceSelectedTypeName,yearSub:this.data.currentDisplay,token:this.bgData.loginedAdminInfo.token}),this.data.loading=!1,this.getTable()},async getTable(){this.data.loading=!0;let e=await b().axiosPostWithCheckStatus(m().serverURL,"/bg/scoreRank/list",{token:this.bgData.loginedAdminInfo.token,province:this.data.selectedProvinceName,type:this.data.selectedProvinceSelectedTypeName,yearSub:this.data.currentDisplay});this.data.table=e.results,this.data.loading=!1},selectProvinceChanged(){let e="";for(let t=0;t<this.data.provinceTypes.length;t++)if(this.data.provinceTypes[t].name==this.data.selectedProvinceName){e=this.data.provinceTypes[t];break}this.data.selectedProvinceType=e.type},async getProvinceTypes(){let e=await b().axiosPost(m().serverURL,"/bg/crawler/SRTTypes",{token:this.bgData.loginedAdminInfo.token});this.data.provinceTypes=e.results},async deleteYearScoreRankingTable(e){this.data.showRightMenu=!1}},mounted(){this.getProvinceTypes()},props:{appData:void 0,bgData:void 0},computed:{},watch:{},created(){},beforeMount(){},beforeUpdate(){},beforeDestroy(){},updated(){},destroyed(){},activated(){}},x=a(3744);const k=(0,x.Z)(y,[["render",u],["__scopeId","data-v-db8b01ce"]]);var w=k}}]);
//# sourceMappingURL=571.afff7b37.js.map