"use strict";(self["webpackChunkvolunteer_aid"]=self["webpackChunkvolunteer_aid"]||[]).push([[861],{1318:function(t,a,e){e.d(a,{Z:function(){return O}});var n=e(6252),i=e(3577);const r=t=>((0,n.dD)("data-v-d52bb41a"),t=t(),(0,n.Cn)(),t),o=r((()=>(0,n._)("div",{style:{width:"100%",height:"100%","z-index":"1005",position:"absolute",left:"0",top:"0","backdrop-filter":"blur(10px)"}},null,-1))),s={style:{width:"100%",height:"100%",position:"absolute",left:"0",top:"0","z-index":"1006"}},d={style:{transform:"translateY(-50%)"},width:"18",height:"18",viewBox:"0 0 48 48",fill:"currentColor"},l=r((()=>(0,n._)("path",{d:"M16 9.162a1 1 0 011.648-.762l17.456 14.838a1 1 0 010 1.524L17.648 39.599A1 1 0 0116 38.838V9.162z",fill:"currentColor"},null,-1))),p=[l],h={style:{transform:"translateY(-50%)"},width:"18",height:"18",viewBox:"0 0 48 48",fill:"currentColor"},g=r((()=>(0,n._)("path",{d:"M30.311 6.604C30.948 6 32 6.451 32 7.33v33.342c0 .878-1.052 1.33-1.689.725L12.763 24.725a1 1 0 010-1.   45l17.548-16.67z",fill:"currentColor"},null,-1))),u=[g];function c(t,a,e,r,l,g){const c=(0,n.up)("BannerScroll");return(0,n.wg)(),(0,n.iD)("div",{class:"banner-wrapper",style:(0,i.j5)([{width:"100%",position:"relative","transition-property":"scale, opacity","transition-duration":".1s"},{height:l.data.height,scale:l.data.visible?1:1.01,opacity:l.data.visible?1:0}])},[(0,n._)("div",{style:(0,i.j5)([{width:"100%",height:"100%",position:"absolute",left:"0",top:"0","z-index":"1004","backdrop-filter":"blur(20px)",opacity:"1"},{backgroundColor:e.appData.theme.background}])},[(0,n.Wm)(c,{"app-data":e.appData,"banner-data":l.data,banners:l.data.banners},null,8,["app-data","banner-data","banners"]),o],4),(0,n._)("div",s,[(0,n.Wm)(c,{"app-data":e.appData,"banner-data":l.data,banners:l.data.banners},null,8,["app-data","banner-data","banners"])]),(0,n._)("div",{style:(0,i.j5)([{width:"18px",height:"40px",position:"absolute",right:"10px",transform:"translateY(-50%)","text-align":"center","box-shadow":"0 4px 10px rgba(0,0,0,0.1)","backdrop-filter":"blur(20px)","z-index":"1010"},{top:(l.data.heightNum/2).toString()+"px",backgroundColor:e.appData.theme.background}]),class:"banner-control",onClick:a[0]||(a[0]=t=>{g.rightClick(),g.resetTimer()})},[((0,n.wg)(),(0,n.iD)("svg",d,p))],4),(0,n._)("div",{style:(0,i.j5)([{width:"18px",height:"40px",position:"absolute",left:"10px",transform:"translateY(-50%)","text-align":"center","box-shadow":"0 4px 10px rgba(0,0,0,0.1)","backdrop-filter":"blur(20px)","z-index":"1010"},{top:(l.data.heightNum/2).toString()+"px",backgroundColor:e.appData.theme.background}]),class:"banner-control",onClick:a[1]||(a[1]=t=>{g.leftClick(),g.resetTimer()})},[((0,n.wg)(),(0,n.iD)("svg",h,u))],4)],4)}const b=t=>((0,n.dD)("data-v-104afeb6"),t=t(),(0,n.Cn)(),t),x={class:"banner-wrapper",style:{width:"500%",height:"100%",padding:"20px 0",overflow:"hidden",position:"relative"}},m={style:{width:"500%",height:"100%",overflow:"hidden","border-radius":"10px"}},v=b((()=>(0,n._)("div",{class:"banner-top",style:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%","border-radius":"10px"}},null,-1))),w={style:{transform:"translateY(-100%)",position:"absolute"}},f=["onClick"],y=b((()=>(0,n._)("span",{style:{position:"relative",top:"1px","margin-right":"4px"}},[(0,n._)("svg",{width:"14",height:"14",viewBox:"0 0 48 48",fill:"currentColor"},[(0,n._)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M32.556 24L16.293 7.737a1 1 0 010-1.415l1.414-1.414a1 1 0 011.414 0L36.8 22.586a2 2 0 010 2.828L19.121 43.092a1 1 0 01-1.414 0l-1.414-1.414a1 1 0 010-1.414L32.556 24z",fill:"currentColor"})])],-1))),k=b((()=>(0,n._)("span",null,"查看详情",-1))),S=[y,k];function D(t,a,e,r,o,s){return(0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("div",m,[(0,n._)("div",{style:(0,i.j5)([{width:"500%",height:"100%","border-radius":"10px"},{marginLeft:"large"==e.bannerData.size?(-290-(e.bannerData.heightNum/1.5+10)*(e.bannerData.currentIndex-1)).toString()+"px":(-250-(e.bannerData.heightNum/1.5+10)*(e.bannerData.currentIndex-1)).toString()+"px",transition:e.bannerData.showAnimation?"margin-left 1s cubic-bezier(0.23, 1, 0.320, 1)":"unset"}])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.banners,(r=>((0,n.wg)(),(0,n.iD)("div",{style:(0,i.j5)([{width:r.index==e.bannerData.currentIndex?e.bannerData.currentBannerWidth:(e.bannerData.heightNum/1.5).toString()+"px",transition:e.bannerData.showAnimation?"all 1s cubic-bezier(0.23, 1, 0.320, 1)":"unset",backgroundImage:"url("+e.appData.serverURL+"/download/"+r.background+")",paddingTop:(e.bannerData.heightNum/2).toString()+"px"},{height:"100%","border-radius":"10px","margin-right":"10px",display:"inline-block","background-color":"var(--color-neutral-2)","background-position":"center","background-repeat":"no-repeat","background-size":"cover","padding-left":"40px",position:"relative"}]),class:"sBanner"},[v,(0,n._)("div",w,[(0,n._)("p",{style:(0,i.j5)([{"font-size":"20px",color:"white","word-break":"break-all","text-shadow":"0 1px 3px rgba(0,0,0,0.3)"},{maxWidth:(e.bannerData.heightNum/1.5).toString()+"px",fontSize:r.index==e.bannerData.currentIndex?e.bannerData.currentBannerTitleFontSize:e.bannerData.otherBannerTitleFontSize,transition:e.bannerData.showAnimation?"all 1s cubic-bezier(0.23, 1, 0.320, 1)":"unset"}])},(0,i.zw)(r.title),5)]),r.index==e.bannerData.currentIndex?((0,n.wg)(),(0,n.iD)("p",{key:0,onClick:a[0]||(a[0]=(...a)=>t.test&&t.test(...a)),style:{color:"white",opacity:"0.7",position:"absolute","text-shadow":"0 1px 3px rgba(0,0,0,0.3)"}},(0,i.zw)(r.subTitle),1)):(0,n.kq)("",!0),void 0!=r.link&&""!=r.link?((0,n.wg)(),(0,n.iD)("div",{key:1,class:"button",onClick:t=>s.openLink(r.link)},S,8,f)):(0,n.kq)("",!0)],4)))),256))],4)])])}var N={data(){return{data:{}}},mounted(){},methods:{openLink(t){window.open(t,"_blank")}},props:{banners:void 0,bannerData:void 0,appData:void 0}},_=e(3744);const z=(0,_.Z)(N,[["render",D],["__scopeId","data-v-104afeb6"]]);var B=z,C={data(){return{data:{height:"480px",status:0,heightNum:480,size:void 0,showAnimation:!1,currentIndex:2,operating:!1,banners:void 0,moveNum:1,currentBannerWidth:"",currentBannerTitleFontSize:"",otherBannerTitleFontSize:"",currentTime:5e3,maxTime:5e3,visible:!1}}},mounted(){setTimeout((()=>{this.data.visible=!0}),10),setInterval((()=>{this.appData.pageSize.width>960?(this.data.status=0,this.data.currentBannerWidth="760px"):this.appData.pageSize.width>640?(this.data.status=1,this.data.currentBannerWidth="calc("+this.appData.pageSize.width.toString()+"px - 200px)"):(this.data.status=2,this.data.currentBannerWidth="calc("+this.appData.pageSize.width.toString()+"px - 160px)"),this.appData.pageSize.width>1965?this.data.moveNum=4:this.appData.pageSize.width>1635?this.data.moveNum=3:this.appData.pageSize.width>1305?this.data.moveNum=2:this.data.moveNum=1,this.appData.pageSize.width>1270?(this.data.height="480px",this.data.heightNum=480,this.data.size="large",this.data.currentBannerWidth="860px",this.data.currentBannerTitleFontSize="28px",this.data.otherBannerTitleFontSize="20px"):(this.data.height="425px",this.data.heightNum=425,this.data.size="small",this.data.currentBannerTitleFontSize="24px",this.data.otherBannerTitleFontSize="16px")}),10),this.data.banners=JSON.parse(JSON.stringify(this.banners)),this.data.currentTime=this.data.maxTime,setInterval((()=>{0==this.data.currentTime&&(this.data.currentTime=this.data.maxTime,this.rightClick()),this.data.currentTime-=10}),10)},methods:{resetTimer(){this.data.currentTime=this.data.maxTime},rightClick(){this.data.operating||(this.data.operating=!0,this.data.showAnimation=!0,setTimeout((()=>{this.data.currentIndex+=this.data.moveNum,setTimeout((()=>{this.data.showAnimation=!1,setTimeout((()=>{for(let t=0;t<this.data.moveNum;t++)this.modifyBannerArray(1);this.data.operating=!1}),1)}),1e3)}),1))},leftClick(){this.data.operating||(this.data.operating=!0,this.data.showAnimation=!0,setTimeout((()=>{this.data.currentIndex-=1,setTimeout((()=>{this.data.showAnimation=!1,setTimeout((()=>{this.modifyBannerArray(0),this.data.operating=!1}),1)}),1e3)}),1))},modifyBannerArray(t){let a=[];if(1==t){for(let t=1;t<this.data.banners.length;t++)a.push(JSON.parse(JSON.stringify(this.data.banners[t])));a.push(JSON.parse(JSON.stringify(this.data.banners[0])))}else{a.push(JSON.parse(JSON.stringify(this.data.banners[this.data.banners.length-1])));for(let t=0;t<this.data.banners.length-1;t++)a.push(JSON.parse(JSON.stringify(this.data.banners[t])))}for(let e=0;e<a.length;e++)a[e]["index"]=JSON.parse(JSON.stringify(e));this.data.banners=JSON.parse(JSON.stringify(a)),this.data.currentIndex=2}},props:{appData:void 0,banners:void 0},components:{BannerScroll:B}};const J=(0,_.Z)(C,[["render",c],["__scopeId","data-v-d52bb41a"]]);var O=J},861:function(t,a,e){e.r(a),e.d(a,{default:function(){return R}});var n=e(6252),i=e(3577),r=e(9963);const o=t=>((0,n.dD)("data-v-4b30f394"),t=t(),(0,n.Cn)(),t),s={style:{width:"100%",height:"100vh",color:"var(--color-neutral-10)",margin:"0 auto"}},d=o((()=>(0,n._)("div",{style:{padding:"40px 0 0 0",margin:"0 auto","max-width":"1550px",width:"90%"}},[(0,n._)("p",{style:{"font-size":"24px","font-weight":"bold","margin-bottom":"20px"}},"轮播图管理")],-1))),l={style:{width:"100%",height:"calc(100% - 96px)",position:"relative","text-align":"center","overflow-y":"auto","overflow-x":"hidden"}},p={style:{width:"90%","max-width":"1550px",display:"inline-block","text-align":"left",position:"relative","padding-bottom":"40px"}},h=o((()=>(0,n._)("p",{style:{"font-size":"18px","font-weight":"bold","margin-top":"10px"}},"效果预览",-1))),g=o((()=>(0,n._)("p",{style:{"margin-top":"10px"}},"受页面布局限制，此轮播图仅供参考，请以首页轮播图为准。",-1))),u=o((()=>(0,n._)("p",{style:{"font-size":"18px","font-weight":"bold","margin-top":"20px"}},"编辑",-1))),c={style:{width:"calc(100% + 20px)"}},b={key:0,style:{width:"100%",height:"100%",position:"absolute",padding:"20px 20px"}},x=o((()=>(0,n._)("p",null,"标题",-1))),m=["onUpdate:modelValue"],v=o((()=>(0,n._)("p",{style:{"margin-top":"10px"}},"副标题",-1))),w=["onUpdate:modelValue"],f=o((()=>(0,n._)("p",{style:{"margin-top":"10px"}},"链接",-1))),y=["onUpdate:modelValue"],k={style:{"margin-top":"10px","text-align":"right"}},S=["onClick"],D=["onClick"],N=["onClick"],_=["onClick"],z=o((()=>(0,n._)("svg",{width:"22",height:"22",viewBox:"0 0 48 48",fill:"currentColor"},[(0,n._)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M35 21h6v6h-6v-6zm-22 0v6H7v-6h6zm14 0v6h-6v-6h6z",fill:"currentColor"})],-1))),B=[z],C={class:"cardInside",style:{width:"calc(100% - 20px)",height:"100%",position:"absolute","background-position":"center","background-repeat":"no-repeat","background-size":"cover","padding-top":"150px","text-align":"center"}};function J(t,a,e,o,z,J){const O=(0,n.up)("banner",!0),T=(0,n.up)("a-upload");return(0,n.wg)(),(0,n.iD)("div",s,[d,(0,n._)("div",l,[(0,n._)("div",p,[h,g,void 0!=z.data.banners?((0,n.wg)(),(0,n.j4)(O,{key:0,"app-data":e.appData,banners:z.data.bannersDis,style:{"border-radius":"5px",overflow:"hidden","margin-top":"10px",width:"1940px","margin-left":"calc(50% - 0px)",transform:"translateX(-50%)","max-width":"calc(100vw - 240px)"}},null,8,["app-data","banners"])):(0,n.kq)("",!0),u,(0,n._)("div",c,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(z.data.banners,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"card",style:(0,i.j5)([{display:"inline-block",height:"300px","margin-top":"15px","border-radius":"10px",position:"relative"},{width:"calc((100%) /"+z.data.singleLineNum.toString()+")"}])},[(0,n._)("div",{class:"cardInside",style:(0,i.j5)([{width:"calc(100% - 20px)",height:"100%",position:"relative","background-position":"center","background-repeat":"no-repeat","background-size":"cover"},{backgroundImage:J.getBackgroundURL(t)}])},[1==t.show?((0,n.wg)(),(0,n.iD)("div",b,[x,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":a=>t.title=a,type:"text",style:{"margin-top":"10px","line-height":"30px",color:"var(--color-neutral-10)",width:"100%",border:"0"},placeholder:"请输入标题"},null,8,m),[[r.nr,t.title]]),v,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":a=>t.subTitle=a,type:"text",style:{"margin-top":"10px","line-height":"30px",color:"var(--color-neutral-10)",width:"100%",border:"0"},placeholder:"请输入副标题"},null,8,w),[[r.nr,t.subTitle]]),f,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":a=>t.link=a,type:"text",style:{"margin-top":"10px","line-height":"30px",color:"var(--color-neutral-10)",width:"100%",border:"0"},placeholder:"请输入跳转链接"},null,8,y),[[r.nr,t.link]]),(0,n._)("div",k,[(0,n._)("button",{onClick:a=>t.show=!1},"返回",8,S),(0,n._)("button",{onClick:a=>J.showBigPicture(t)},"查看",8,D),(0,n._)("button",{onClick:a=>J.deleteBanner(t)},"删除",8,N),(0,n._)("button",{onClick:a[0]||(a[0]=t=>J.saveBanner())},"保存")])])):(0,n.kq)("",!0),1!=t.show?((0,n.wg)(),(0,n.iD)("div",{key:1,onClick:()=>{t.show=!0},class:"cardTag",style:{position:"absolute",right:"10px",top:"10px","border-radius":"100px",width:"30px",height:"30px","box-shadow":"0 4px 10px rgba(0,0,0,0.1)","background-color":"var  (--color-neutral-1)",color:"var(--color-neutral-10)",padding:"0 0","padding-left":"4px","padding-top":"4px"}},B,8,_)):(0,n.kq)("",!0)],4)],4)))),256)),(0,n._)("div",{class:"card",style:(0,i.j5)([{display:"inline-block",height:"300px","margin-top":"15px","border-radius":"10px",position:"relative",cursor:"pointer"},{width:"calc((100%) /"+z.data.singleLineNum.toString()+")"}])},[(0,n._)("div",C,[(0,n.Wm)(T,{accept:".png,.jpg,.jpeg,.bmp,.webp",onSuccess:J.uploadedBanner,action:e.appData.serverURL+"/upload",style:{transform:"translateY(-50%)",display:"inline-block","background-color":"transparent"}},null,8,["onSuccess","action"])])],4)])])])])}var O=e(2487),T=e.n(O),L=e(9182),I=e.n(L),U=e(1318),A=e(5121),j={components:{banner:U.Z},name:"",data(){return{data:{loading:!1,banners:void 0,bannersDis:void 0,singleLineNum:3}}},methods:{async uploadedBanner(t){let a=JSON.parse(JSON.stringify(this.data.banners));a.push({title:"",subTitle:"",link:"",background:t.response.results}),a=JSON.stringify(a);await T().axiosPostWithCheckStatus(I().serverURL,"/setting/changeValue",{token:this.bgData.loginedAdminInfo.token,keyName:"banner",value:a});this.getBanner()},async saveBanner(){let t=JSON.parse(JSON.stringify(this.data.banners));for(let a=0;a<t.length;a++)t[a].show=!1;t=JSON.stringify(t);await T().axiosPostWithCheckStatus(I().serverURL,"/setting/changeValue",{token:this.bgData.loginedAdminInfo.token,keyName:"banner",value:t});this.getBanner()},showBigPicture(t){window.open(I().serverURL+"/download/"+t.background,"_blank")},async deleteBanner(t){let a=[];for(let e=0;e<this.data.banners.length;e++)e!=t.index&&a.push(JSON.parse(JSON.stringify(this.data.banners[e])));await T().axiosPostWithCheckStatus(I().serverURL,"/setting/changeValue",{token:this.bgData.loginedAdminInfo.token,keyName:"banner",value:JSON.stringify(a)});this.getBanner()},getBackgroundURL(t){return"url("+I().serverURL+"/download/"+t.background+")"},async getBanner(){this.data.banners=void 0,this.data.bannersDis=void 0;let t=JSON.parse((await this.getSettingFromBackend("banner")).results.value);for(let n=0;n<t.length;n++)t[n].index=n;if(this.data.banners=JSON.parse(JSON.stringify(t)),1!=t.length){let a=[];a.push(JSON.parse(JSON.stringify(t[t.length-2]))),a.push(JSON.parse(JSON.stringify(t[t.length-1])));for(let e=0;e<t.length-2;e++)a.push(JSON.parse(JSON.stringify(t[e])));t=a}let a=t.length,e=0;while(t.length<14)t.push(JSON.parse(JSON.stringify(t[e]))),e+=1,e==a&&(e=0);for(let n=0;n<t.length;n++)t[n].index=n;this.data.bannersDis=t},getSettingFromBackend(t){return new Promise((async(a,e)=>a(await this.axiosPost("/setting/get",{keyName:t}))))},axiosPost(t,a){return new Promise(((e,n)=>{a=T().encodeString(JSON.stringify(a));var i={method:"post",url:this.appData.serverURL+t,data:a,headers:{Accept:"*/*"}};(0,A.Z)(i).then((t=>e(JSON.parse(T().decodeString(t.data)))))}))}},async mounted(){await this.getBanner(),setInterval((()=>{this.appData.pageSize.width<=1500?this.data.singleLineNum=2:this.data.singleLineNum=3}),10)},props:{appData:void 0,bgData:void 0},computed:{},watch:{},created(){},beforeMount(){},beforeUpdate(){},beforeDestroy(){},updated(){},destroyed(){},activated(){}},W=e(3744);const F=(0,W.Z)(j,[["render",J],["__scopeId","data-v-4b30f394"]]);var R=F}}]);
//# sourceMappingURL=861.8c475574.js.map